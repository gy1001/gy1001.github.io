<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.36">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="referrer" content="no-referrer"><title>Promise | gyfly.top</title><meta name="description" content="随便写写">
    <link rel="modulepreload" href="/assets/app.11ef605d.js"><link rel="modulepreload" href="/assets/promise.html.b2ccd7cb.js"><link rel="modulepreload" href="/assets/promise.html.f6527cb4.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="/assets/style.803eca29.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/zh/" class=""><img class="logo" src="/images/logo.png" alt="gyfly.top"><span class="site-name can-hide">gyfly.top</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/zh/skill/front/" class="router-link-active" aria-label="技术相关"><!--[--><!--]--> 技术相关 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/zh/collect" class="" aria-label="美文推荐"><!--[--><!--]--> 美文推荐 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/zh/other/" class="" aria-label="其他"><!--[--><!--]--> 其他 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="休闲娱乐"><span class="title">休闲娱乐</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="休闲娱乐"><span class="title">休闲娱乐</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/vuepress/vuepress-next/blob/main/CHANGELOG.md" rel="noopener noreferrer" target="_blank" aria-label="更新日志"><!--[--><!--]--> 更新日志 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/zh/skill/front/about/promise.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/zh/skill/front/" class="router-link-active" aria-label="技术相关"><!--[--><!--]--> 技术相关 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/zh/collect" class="" aria-label="美文推荐"><!--[--><!--]--> 美文推荐 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/zh/other/" class="" aria-label="其他"><!--[--><!--]--> 其他 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="休闲娱乐"><span class="title">休闲娱乐</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="休闲娱乐"><span class="title">休闲娱乐</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/vuepress/vuepress-next/blob/main/CHANGELOG.md" rel="noopener noreferrer" target="_blank" aria-label="更新日志"><!--[--><!--]--> 更新日志 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/zh/skill/front/about/promise.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">HTML5三剑客 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/zh/skill/front/" class="router-link-active sidebar-item" aria-label="前端发展史"><!--[--><!--]--> 前端发展史 <!--[--><!--]--></a><!----></li><li><a href="/zh/skill/front/swordsman/html.html" class="sidebar-item" aria-label="HTML"><!--[--><!--]--> HTML <!--[--><!--]--></a><!----></li><li><a href="/zh/skill/front/swordsman/css.html" class="sidebar-item" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a><!----></li><li><a href="/zh/skill/front/swordsman/js.html" class="sidebar-item" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">JavaScript相关 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/zh/skill/front/about/module.html" class="sidebar-item" aria-label="Module-模块化"><!--[--><!--]--> Module-模块化 <!--[--><!--]--></a><!----></li><li><a href="/zh/skill/front/about/jquery.html" class="sidebar-item" aria-label="jQuery"><!--[--><!--]--> jQuery <!--[--><!--]--></a><!----></li><li><a href="/zh/skill/front/about/grunt.html" class="sidebar-item" aria-label="Grunt"><!--[--><!--]--> Grunt <!--[--><!--]--></a><!----></li><li><a href="/zh/skill/front/about/gulp.html" class="sidebar-item" aria-label="Gulp"><!--[--><!--]--> Gulp <!--[--><!--]--></a><!----></li><li><a href="/zh/skill/front/about/webpack.html" class="sidebar-item" aria-label="webpack"><!--[--><!--]--> webpack <!--[--><!--]--></a><!----></li><li><a href="/zh/skill/front/about/axios.html" class="sidebar-item" aria-label="axios"><!--[--><!--]--> axios <!--[--><!--]--></a><!----></li><li><a href="/zh/skill/front/about/typeScript.html" class="sidebar-item" aria-label="TypeScript"><!--[--><!--]--> TypeScript <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/skill/front/about/promise.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Promise"><!--[--><!--]--> Promise <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/skill/front/about/promise.html#_1、promise-是什么" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、Promise 是什么"><!--[--><!--]--> 1、Promise 是什么 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/skill/front/about/promise.html#_1-1-理解" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.1 理解"><!--[--><!--]--> 1.1 理解 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/skill/front/about/promise.html#_1-2-promise-的状态" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2 promise 的状态"><!--[--><!--]--> 1.2 promise 的状态 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/skill/front/about/promise.html#_1-3-promise-的对象的值" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.3 promise 的对象的值"><!--[--><!--]--> 1.3 promise 的对象的值 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/skill/front/about/promise.html#_1-4-promise-的-基本流程" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.4 promise 的 基本流程"><!--[--><!--]--> 1.4 promise 的 基本流程 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/zh/skill/front/about/promise.html#_2、为什么要使用-promise" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、为什么要使用 Promise"><!--[--><!--]--> 2、为什么要使用 Promise <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/skill/front/about/promise.html#_2-1-指定回调函数的方法更加灵活" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.1 指定回调函数的方法更加灵活"><!--[--><!--]--> 2.1 指定回调函数的方法更加灵活 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/skill/front/about/promise.html#_2-2-支持链式调用-可以解决回调地狱问题" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.2 支持链式调用，可以解决回调地狱问题"><!--[--><!--]--> 2.2 支持链式调用，可以解决回调地狱问题 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/skill/front/about/promise.html#_2-3-如何使用-promise" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.3 如何使用 Promise"><!--[--><!--]--> 2.3 如何使用 Promise <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/skill/front/about/promise.html#_2-3-2-promise-的几个关键问题" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.3.2 promise 的几个关键问题"><!--[--><!--]--> 2.3.2 promise 的几个关键问题 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/zh/skill/front/about/promise.html#_3-async-与-await" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. async 与 await"><!--[--><!--]--> 3. async 与 await <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/skill/front/about/promise.html#_3-1-mdn-文档" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1 mdn 文档"><!--[--><!--]--> 3.1 mdn 文档 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/skill/front/about/promise.html#_3-2-async-函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2 async 函数"><!--[--><!--]--> 3.2 async 函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/skill/front/about/promise.html#_3-3-await-表达式" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3 await 表达式"><!--[--><!--]--> 3.3 await 表达式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/skill/front/about/promise.html#_3-4-注意" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.4 注意"><!--[--><!--]--> 3.4 注意 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/zh/skill/front/about/promise.html#_4、一些注意点" class="router-link-active router-link-exact-active sidebar-item" aria-label="4、一些注意点"><!--[--><!--]--> 4、一些注意点 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/skill/front/about/promise.html#_1-promise-的-then-的第二个参数和-catch-的区别" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. Promise 的 then 的第二个参数和 catch 的区别"><!--[--><!--]--> 1. Promise 的 then 的第二个参数和 catch 的区别 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/skill/front/about/promise.html#_2-promise-多个-then-回调中存在的问题" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. Promise 多个 then 回调中存在的问题"><!--[--><!--]--> 2. Promise 多个 then 回调中存在的问题 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><li><a href="/zh/skill/front/about/todo.html" class="sidebar-item" aria-label="TODO"><!--[--><!--]--> TODO <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">前端框架 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/zh/skill/front/frame/vue.html" class="sidebar-item" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a><!----></li><li><a href="/zh/skill/front/frame/react.html" class="sidebar-item" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">mini-前端框架 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/zh/skill/front/mini-frame/mini-vue.html" class="sidebar-item" aria-label="Mini-Vue"><!--[--><!--]--> Mini-Vue <!--[--><!--]--></a><!----></li><li><a href="/zh/skill/front/mini-frame/mini-webpack.html" class="sidebar-item" aria-label="mine-webpack"><!--[--><!--]--> mine-webpack <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">源码解读 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/zh/skill/front/source/axios.html" class="sidebar-item" aria-label="axios 源码解析"><!--[--><!--]--> axios 源码解析 <!--[--><!--]--></a><!----></li><li><a href="/zh/skill/front/source/promise.html" class="sidebar-item" aria-label="自定义 Promise"><!--[--><!--]--> 自定义 Promise <!--[--><!--]--></a><!----></li><li><a href="/zh/skill/front/source/utils.html" class="sidebar-item" aria-label="一些工具库函数"><!--[--><!--]--> 一些工具库函数 <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item">Vue源码 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/zh/skill/front/source/vue/mustache.html" class="sidebar-item" aria-label="源码探秘之 Mustache"><!--[--><!--]--> 源码探秘之 Mustache <!--[--><!--]--></a><!----></li><li><a href="/zh/skill/front/source/vue/diff.html" class="sidebar-item" aria-label="源码探秘之虚拟 Dom 和 Diff 算法"><!--[--><!--]--> 源码探秘之虚拟 Dom 和 Diff 算法 <!--[--><!--]--></a><!----></li><li><a href="/zh/skill/front/source/vue/reactivity.html" class="sidebar-item" aria-label="源码探秘之数据变化侦测"><!--[--><!--]--> 源码探秘之数据变化侦测 <!--[--><!--]--></a><!----></li><li><a href="/zh/skill/front/source/vue/ast.html" class="sidebar-item" aria-label="源码探秘之 AST 抽象语法树"><!--[--><!--]--> 源码探秘之 AST 抽象语法树 <!--[--><!--]--></a><!----></li><li><a href="/zh/skill/front/source/vue/direct-method.html" class="sidebar-item" aria-label="源码探秘之指令和生命周期"><!--[--><!--]--> 源码探秘之指令和生命周期 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">一些翻译 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/zh/skill/front/translate/require-js.html" class="sidebar-item" aria-label="Require.js"><!--[--><!--]--> Require.js <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="promise" tabindex="-1"><a class="header-anchor" href="#promise" aria-hidden="true">#</a> Promise</h1><h2 id="_1、promise-是什么" tabindex="-1"><a class="header-anchor" href="#_1、promise-是什么" aria-hidden="true">#</a> 1、Promise 是什么</h2><h3 id="_1-1-理解" tabindex="-1"><a class="header-anchor" href="#_1-1-理解" aria-hidden="true">#</a> 1.1 理解</h3><ol><li>抽象表达 <ul><li>Promise 是一门新的技术(ES6 规范)</li><li>Promise 是 JS 中进行异步编程的新解决方案（备注：旧方案是单纯使用回调函数） <ul><li>异步操作 <ul><li>fs 文件操作</li><li>数据库操作</li><li>AJAX</li><li>定时器</li></ul></li></ul></li></ul></li><li>具体表达： <ul><li>从语法上来说：Promise 是一个构造函数</li><li>从功能上来说：Promise 对象用来封装一个异步操作并可以获取其成功、失败的结果值</li></ul></li></ol><h3 id="_1-2-promise-的状态" tabindex="-1"><a class="header-anchor" href="#_1-2-promise-的状态" aria-hidden="true">#</a> 1.2 promise 的状态</h3><blockquote><p>promise 是一个属性：promiseState： pending/resolved/rejected</p></blockquote><ol><li>pending 变为 resolved（fullfield）</li><li>pending 变为 rejected</li></ol><p>说明：</p><p>只有这 2 种，且一个 promise 对象只能改变一次，</p><p>无论变为成功还是失败，都会有一个结果数据。</p><p>成功的结果数据一般称为 value, 失败的结果数据一般称为 reason</p><h3 id="_1-3-promise-的对象的值" tabindex="-1"><a class="header-anchor" href="#_1-3-promise-的对象的值" aria-hidden="true">#</a> 1.3 promise 的对象的值</h3><blockquote><p>实例对象中的另一个属性: promiseResult</p></blockquote><p>保存着对象的[成功/失败]的结果</p><ul><li>resolve</li><li>reject</li></ul><h3 id="_1-4-promise-的-基本流程" tabindex="-1"><a class="header-anchor" href="#_1-4-promise-的-基本流程" aria-hidden="true">#</a> 1.4 promise 的 基本流程</h3><ol><li>创建：new Promise() ，注意：此刻是 pending 状态</li><li>执行异步操作 <ul><li>成功了，执行 resolve() <ul><li>promise 对象 变为 resolved 状态</li><li>指向 .then() ：回调 onResolved()</li><li>最后指向 新的 promise 对象</li></ul></li><li>失败了，执行 reject() <ul><li>promise 对象 变为 reject 状态</li><li>指向 .then()/.catch() 回调 onRejected()</li><li>最后指向新的 promise 对象</li></ul></li></ul></li></ol><h2 id="_2、为什么要使用-promise" tabindex="-1"><a class="header-anchor" href="#_2、为什么要使用-promise" aria-hidden="true">#</a> 2、为什么要使用 Promise</h2><h3 id="_2-1-指定回调函数的方法更加灵活" tabindex="-1"><a class="header-anchor" href="#_2-1-指定回调函数的方法更加灵活" aria-hidden="true">#</a> 2.1 指定回调函数的方法更加灵活</h3><ol><li>旧的：必须在异步任务前指定</li><li>promise: 启动异步任务 =》返回 promise 对象 =》给 promise 对象绑定回调函数（甚至可以在异步任务结束后指定多个）</li></ol><h3 id="_2-2-支持链式调用-可以解决回调地狱问题" tabindex="-1"><a class="header-anchor" href="#_2-2-支持链式调用-可以解决回调地狱问题" aria-hidden="true">#</a> 2.2 支持链式调用，可以解决回调地狱问题</h3><ol><li><p>什么是回调地狱</p><blockquote><p>回调函数嵌套调用，外部回调函数异步执行的结果是嵌套的回调执行的条件</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">asyncFunc1</span><span class="token punctuation">(</span>opt1<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>arg1</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">asyncFunc2</span><span class="token punctuation">(</span>opt2<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>arg2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">asyncFunc3</span><span class="token punctuation">(</span>opt3<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>arg3</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// to do something</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li><li><p>回调地狱的缺点</p><ul><li>不便于阅读</li><li>不便于异常处理</li></ul></li><li><p>解决方案</p><ul><li>promise 链式调用</li><li>async/await: 回调地狱的终极解决方案</li></ul></li><li><p>Promie 的缺点</p><ul><li>无法取消 promie, 一旦新建它就会立即执行，无法中途取消</li><li>如果不设置回调函数，Promise 内部抛出的错误，不会反应到外部</li><li>当处于 pending 状态时，无法得知目前进展到哪一个阶段（刚刚开始还是即将完成）</li></ul></li></ol><h3 id="_2-3-如何使用-promise" tabindex="-1"><a class="header-anchor" href="#_2-3-如何使用-promise" aria-hidden="true">#</a> 2.3 如何使用 Promise</h3><h4 id="_2-3-1-api" tabindex="-1"><a class="header-anchor" href="#_2-3-1-api" aria-hidden="true">#</a> 2.3.1 API</h4><ol><li><p>Promise 的构造函数：Promise(executor) {}</p><ul><li>executor 函数： 执行器 (resolve, reject) =&gt; {}</li><li>resolve 函数：内部定义成功时我们调用的函数：value =&gt; {}</li><li>reject 函数：内部定义失败时我们调用的函数：reason =&gt; {} 说明：executor 会在 Promise 内部立即同步调用，异步操作在执行器中执行</li></ul></li><li><p>Promise.prototype.then 方法: (onResolved, onRejected) =&gt; {}</p><ul><li>onResolved 函数：成功的回调函数：(value) =&gt; {}</li><li>onRejected 函数：失败的回调函数：(reason) =&gt; {} 说明：指定用于得到成功 value 的成功回调和用于得到失败 reason 的失败回调，返回一个新的 promise 对象</li></ul></li><li><p>Promise.prototype.catch 方法：（onRejected） =&gt; {}</p><ul><li>onRejected 函数：失败的回调函数 （reason） =&gt; {} 说明：then()的语法糖，相当于 then(undefined, onRejected)</li></ul></li><li><p>Promise.resolve 方法: (value) =&gt; {}</p><ul><li>value: 成功的数据或者 promie 对象 说明：返回一个失败/成功的 promise 对象</li></ul></li><li><p>Promise.reject 方法：（reason） =&gt; {}</p><ul><li>reason : 失败的原因 说明：返回一个失败的 promise 对象</li></ul></li><li><p>Promise.all 方法：（promises）=&gt; {}</p><ul><li>promises：包含 n 个 promise 的数组 说明：返回一个新的 promise, 只有所有的 promise 都成功才成功，只要有一个失败了就直接失败</li></ul></li><li><p>Promise.race 方法：(promises) =&gt; {}</p><ul><li>promises 包含 n 个 promise 的数组 说明：返回一个新的 promise, 第一个完成的 promise 的结果状态就是最终的结果状态。它只关注是否已解决，而不管其被解决还是被拒绝。</li></ul></li></ol><h3 id="_2-3-2-promise-的几个关键问题" tabindex="-1"><a class="header-anchor" href="#_2-3-2-promise-的几个关键问题" aria-hidden="true">#</a> 2.3.2 promise 的几个关键问题</h3><ol><li><p>如何改变 promise 的装填</p><ul><li>resolve(value) 如果当时是 pending，就会变为 resolved</li><li>reject(reason)：如果当时是 pending, 就会变为 rejected</li><li>抛出异常：如果当期是 pending 就会变为 rejected</li></ul></li><li><p>一个 promise 指定多个失败/失败回调函数，都会调用吗</p><ul><li>当 promise 改变为对应状态时候都会调用</li></ul></li><li><p>改变 promise 状态和指定回调函数谁先谁后</p><ul><li>都有可能，正常情况下是先指定回调在改变状态，但也可以先改变状态在指定回调</li><li>如何先该状态在指定回调 <ul><li>在执行器中直接调用 resolve()/reject()</li><li>延迟更长时间才调用 then()</li></ul></li><li>什么时候才能得到数据 <ul><li>如果先指定的回调，那当状态发生改变时，回到函数就会调用，得到数据</li><li>如果先改变的状态，那当指定回调时，回调函数就会调用，得到数据</li></ul></li></ul></li><li><p>promise.then()返回的新 promise 的结果状态由什么决定</p><ul><li>简单表达：由 then 指定的回调函数执行的结果决定</li><li>详细表达 <ul><li>如果抛出异常，新 promise 变为 rejected, reason 为抛出的异常</li><li>如果返回的是非 promise 的任意值，新 promise 变为 resolve，value 为返回的值</li><li>如果返回的是另一个新 promise,此 promise 的结果就会成为新 promise 的结果</li></ul></li></ul></li><li><p>promise 如何串联多个操作任务</p><ul><li>promise 的 then 返回一个新的 promise，可以开成 then 的链式调用</li><li>通过 then 的链式调用串联多个同步/异步任务</li></ul></li><li><p>promise 异常穿透</p><ul><li>当使用 promise 的 then 链式调用时，可以在最后指定失败的回调</li><li>前面任何操作出了异常，都会传到最后失败的回调中处理</li></ul></li><li><p>中断 promise 链？</p><ul><li>当使用 promise 的 then 链式调用时，在中间中断，不再调用后面的回调函数</li><li>办法：在回调函数中返回一个 pendding 状态的 promise 对象</li></ul></li></ol><h2 id="_3-async-与-await" tabindex="-1"><a class="header-anchor" href="#_3-async-与-await" aria-hidden="true">#</a> 3. async 与 await</h2><h3 id="_3-1-mdn-文档" tabindex="-1"><a class="header-anchor" href="#_3-1-mdn-文档" aria-hidden="true">#</a> 3.1 mdn 文档</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/async_function" target="_blank" rel="noopener noreferrer">mdn 文档--async<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="_3-2-async-函数" tabindex="-1"><a class="header-anchor" href="#_3-2-async-函数" aria-hidden="true">#</a> 3.2 async 函数</h3><ol><li>函数的返回值为 promise 对象</li><li>promise 对象的结果由 async 函数执行的返回值决定</li></ol><h3 id="_3-3-await-表达式" tabindex="-1"><a class="header-anchor" href="#_3-3-await-表达式" aria-hidden="true">#</a> 3.3 await 表达式</h3><ol><li>await 右侧的表达式一般为 promise 对象，但也可以是其他的值</li><li>如果表达式是 promise 对象，await 返回的是 promise 成功的值</li><li>如果表达式是其他值，直接将此值作为 await 的返回值</li></ol><h3 id="_3-4-注意" tabindex="-1"><a class="header-anchor" href="#_3-4-注意" aria-hidden="true">#</a> 3.4 注意</h3><ol><li>await 必须写在 async 函数中，但是 async 函数中可以没有 await</li><li>如果 await 的 promise 失败了，就会抛弃异常，需要通过 try...catch 捕获处理</li></ol><h2 id="_4、一些注意点" tabindex="-1"><a class="header-anchor" href="#_4、一些注意点" aria-hidden="true">#</a> 4、一些注意点</h2><h3 id="_1-promise-的-then-的第二个参数和-catch-的区别" tabindex="-1"><a class="header-anchor" href="#_1-promise-的-then-的第二个参数和-catch-的区别" aria-hidden="true">#</a> 1. Promise 的 then 的第二个参数和 catch 的区别</h3><ol><li><p>首先区分前提：</p><ul><li>reject 是用来抛出异常的，catch 是用来处理异常的</li><li>reject 是 Promise 的方法，而 then 和 catch 是 Promise 实例的方法（Promise.prototype.then 和 Promise.prototype.catch）</li></ul></li><li><p>区别：</p><ul><li><strong>如果在 then 的第一个函数里抛出了异常，后面的 catch 能捕获到，而 then 的第二个函数捕获不到。</strong></li></ul></li><li><p>相同</p><ul><li><p>then 的第二个参数和 catch 捕获错误信息的时候会遵循就近原则。</p><ul><li><p>如果是 promise 内部报错，reject 抛出错误后，then 的第二个参数和 catch 方法都存在的情况下，只有 then 的第二个参数能捕获到，如果 then 的第二个参数不存在，则 catch 方法会捕获到。 来看下面的例子：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 如下代码</span>
<span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> rejected</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;test&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//此时只有then的第二个参数可以捕获到错误信息</span>
promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err1</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//此时catch方法可以捕获到错误信息</span>
promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err1</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//此时只有then的第二个参数可以捕获到Promise内部抛出的错误信息</span>
promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err1</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//此时只有then的第二个参数可以捕获到Promise内部抛出的错误信息</span>
promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//此时catch可以捕获到Promise内部抛出的错误信息</span>
promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err1</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

作者：贾西贝Xx
<span class="token literal-property property">链接：https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>juejin<span class="token punctuation">.</span>cn<span class="token operator">/</span>post<span class="token operator">/</span><span class="token number">7075894989200293919</span>
来源：稀土掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div></li></ul></li></ul></li><li><p>实现语法糖：<strong><code>catch只是一个语法糖而己 还是通过then 来处理的，</code></strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Promise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">catch</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>写法比较</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// bad</span>
promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// success</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// error</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

<span class="token comment">// good</span>
promise
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//cb</span>
    <span class="token comment">// success</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// error</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li><li><p>总结</p><p><strong>上面代码中，第二种写法要好于第一种写法，理由是第二种写法可以捕获前面 then 方法执行中的错误，也更接近同步的写法（try/catch）。因此，建议总是使用 catch 方法，而不使用 then 方法的第二个参数。</strong></p></li></ol><h3 id="_2-promise-多个-then-回调中存在的问题" tabindex="-1"><a class="header-anchor" href="#_2-promise-多个-then-回调中存在的问题" aria-hidden="true">#</a> 2. Promise 多个 then 回调中存在的问题</h3><blockquote><p>当 主 promise 失败时候，如果第一个 then 函数的第二个参数有处理且不抛出问题，那么将会执行后续 then 函数的第一个参数，，依次类推</p></blockquote><p>代码如下</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#39;error122&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> p
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">value1</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&#39;i am success&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token parameter">error1</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;error1&#39;</span><span class="token punctuation">,</span> error1<span class="token punctuation">)</span> <span class="token comment">// 之类会执行，打印 error1 error122</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;res2&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token comment">// 这里会执行，打印 res2 undefined</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token parameter">error2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;error2&#39;</span><span class="token punctuation">,</span> error2<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res3</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;res3&#39;</span><span class="token punctuation">,</span> res3<span class="token punctuation">)</span> <span class="token comment">// 这里会执行,打印 res3 undefined</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3333</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/zh/skill/front/about/typeScript.html" class="" aria-label="TypeScript"><!--[--><!--]--> TypeScript <!--[--><!--]--></a></span><span class="next"><a href="/zh/skill/front/about/todo.html" class="" aria-label="TODO"><!--[--><!--]--> TODO <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.11ef605d.js" defer></script>
  </body>
</html>
