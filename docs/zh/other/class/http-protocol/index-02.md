#  02-HTTP初相识--了解HTTP协议
## 2.1 了解 HTTP 协议
### 2.1.1 浏览器背后的故事
访问网站通过域名，域名解析到服务器，服务器将数据返回给浏览器，浏览器渲染页面，用户看到页面。

* 域名～dns解析为ip
* 域名易记，ip难记！类似通讯录的电话号码
* 通讯需要共同语言：协议相关，比如 http协议
* 浏览器拿到后台返回的文本后，需要渲染出来给用户看，里面涉及到依赖资源的加载，js、css、图片、视频等，浏览器下载解析渲染合并图层等最终显示到页面中

![image-20230922235824385](http://s0yt5act2.bkt.clouddn.com/image-20230922235824385.png)

### 2.1.2 HTTP

* `HTTP`协议(超文本传输协议`HyperText Transfer Protocol`)，它是基于`TCP协议`的应用层传输协议，简单来说就是客户端和服务端进行数据传输的一种规则。
* 它允许将超文本标记语言（HTML）从 WEB 服务器传送给客户端的浏览器
* HTTP 是一个属于`应用层的面向对象的协议`。由于其简捷、快速的方式，适用于分不超媒体信息系统。它于 1990 年提出，经过几年的使用与发展，得到不断地完善和扩展

### 2.1.3 HTTP 与 WEB

* WEB 是一种基于超文本和 HTTP 的、全球性的、动态交互的、跨平台的分布式`图形信息系统`
* 建立在 Internet 上的一张`网络服务`，为浏览折在 Internet 上查找和浏览信息提供了图形化的、易于访问的直观界面，其中的文档即超级链接 internet 上的信息节点组织成一个互为关联的网状结构

## 2.2 HTTP 协议的前世今生

* 1990年10月 万维网之父 Tim Berners-Lee 最早提出了 HTTP 协议
* 1991年，HTTP 0.9 诞生
  * 只有一个get的估计只有一个get的技能，而且只能传递HTML格式的字符串。比如今天的Jason、叉ML TXT什么的，想都别想，毕竟人家年纪还小，要求这么多。
  * 所以在0.9版本它是比较弱化的一个协议形式。而且在这个版本里每个HTP请求都是短链接。当然后面我们会再介绍到底什么是短链。
* 1996年5月，HTTP 1.0 发布
  * 这个时候的HTP有了更多的技能，像post和head，拥有了更多的功能性。比如我们耳熟能详的状态码、缓存、重定向权限等等一大堆的内容。
  * 这时的HTTP可以说成为了一个可以支撑起一片天地的一家之主。
* 1997年1月，HTTP 1.1 发布
  * 这个时候发布的时候，HTP技能更加的多，比如像options could delete，trees connected等等方法。
  * 也引入了现在常用的持久连接管道机制，分块传输等等。
  * HTP1.1是我们目前为止最常用的HTP版本
* 2015年5月，HTTP 2.0 发布
* HTTP 3.0 QUIC 协议

## 2.3. 透过 TCP/IP 看 HTTP

* HTTP 协议是构建在 TCP/IP 协议之上的，是 TCP/IP 协议的一个子集
* 为了更好的理解 HTTP 协议，我们先了解一下 TCP/IP 的相关知识

### 2.3.1 TCP 协议族

* TCPIP协议，其实是一系列的与互联网相关联的协议集合起来的总称。
* 而在TCPIP协议组里面，**分层管理** 是它的一个非常重要的特征。我们来看一看它到底是怎样来进行分层的。

### 2.3.2 TCP 协议族分层

* TCP IP协议组它是由一个四层协议来组成的系统。这四层我们分别叫做`应用层`、`传输层`、`网络层` 和`数据链路层`，我们可以简单称为叫链路层。我们分别来看一下，我们自顶向下的来进行了解。

![image-20230923004811891](http://s0yt5act2.bkt.clouddn.com/image-20230923004811891.png)

#### 2.3.2.1 应用层

* 应用层一般是我们编写的应用程序，它决定了向用户提供的应用服务。

* 应用层可以通过系统调用与传输层向下进行通信。如 FTP、DNS、HTTP 等

比如说我们比较常见的，我们通过FTP去下载文件。很多同学的公司内部都是在用FTP，这个FTP也是我们的应用层级

接下来我们前面介绍过的DNS也是应用层。再有我们的HTP协议更是我们的应用层的上层系。

#### 2.3.2.2 传输层

* 传输层是通过系统调用向应用层提供处于网络连接中两台计算机之间的数据传输功能。
* 在传输层里有两个性质不同的协议，一个我们叫做TCP，另外一个叫做UDP。

TCP是面向连接的，而UDP是无连接的这就决定了TCP虽然它比较可靠，但是因为需要建立连接，就像我们前面介效率就比较低。

UDP它没有连接，所以它效率特别高。

但是同样的，因为你没有去建立连接，没有这样的校验机制，所以可靠性就稍微低一点儿。

这是两种性质不同的协议。所以在正常使用中，我们使用哪种协议是取决于你的场景来决定的。

#### 2.3.2.3 网络层

* 网络层我们又叫做叫网络互联层。
* 网络层是用来处理在网络上流动的一些数据包，数据包是我们网络传输的一个最小的数据单位
* 该层规定了通过怎样的路径，也就是我们说的传输路线到达对方的计算机，并且把数据包传送给对方，与对方计算机之间，通过多台计算机和网络设备来进行传输的时候，网络层它所起到的作用就是在众多的选项之中选择一条传输路线。
* 这是我们网络层的意义。

#### 2.3.2.4 链路层

* 链路层我们又叫做数据链路层，或者有的还叫做网络接口层。
* 但是链路层是我们最常用的一种称呼，它用来处理我们连接网络里面的硬件部分。
* 包括我们的控制操作系统，硬件的设备驱动，然后网卡，光纤物理等等这些。
* 还包括像我们的连接器等等一切的传输媒介，这些硬件上的范畴均在链路层的作用范围之内。

### 2.3.3 数据包的封装过程

> 本对话片段讨论了数据封装的过程和网络传输中的各个层次的协议。通过封装，上层协议的数据被转变成下层协议的数据，并且每层协议都会加上自己的头部信息。利用TCPIP协议族进行网络传输时，数据会按照分层顺序进行传输。发送端通过HTTP协议发送请求，并在传输层利用TCP协议进行分割和标记，然后在网络层利用IP协议添加MAC地址。接收端的服务器在链路层接收请求数据，并按顺序向上层发送，最终在应用层接收到由客户端发送的HTTP请求。在TCP连接中，建立连接需要进行三次握手，确保连接的可靠性。

