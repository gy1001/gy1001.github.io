# 编程必备基础

> 计算机组成原理+操作系统+计算机网络
>
> 计算机基础——更适合程序员的编程必备基础知识
>
> 文科生都能听懂学会／比大学课程学习体验更好／更贴近实际工作内容
>
> 60% 理论 + 30% 实践 + 10% 习题

## 1. 导论

### 1.1 计算机系必须专业课

计算机组成原理+操作系统+计算机网络 +（数据结构）

### 1.2 课程的目的

- 帮助大家形成计算机知识的结构体系
- 帮助大家理解计算机底层原理
- 帮助大家在工作实践中借鉴其中的优秀设计

### 1.3 学习这门可课程的原因

#### 1.3.1 互联网公司笔/面试逃不开的知识点

- 通过面试/笔试去考察同学的计算机基础知识
- 不是为了应付面试和笔试
- 关注自身方面技能的提升

#### 1.3.2 填补内容稀缺，补全短板

- 大家往往喜欢从项目入手，容易忽略后台和底层基础
- 线上关于基础知识的综合课程甚少

### 1.4 课程特点：

#### 1.4.1 内容扎实、夯实基础

- 课程内容是大学计算机系里面最重要的科目
- 目的是帮助大家夯实计算机基础知识

#### 1.4.2 知行合一、结合实践

- 为了避免学习过程的枯燥，课程加入了丰富的实践内容
  - 实践内容：缓存置换算法、线程池/异步任务、网络嗅探工具、也会穿插一些小实践

#### 1.4.3 内容重组、贴近实际

- 对内容进行了重组，突出重点，更加符合实际需求
  - 比如计算机组成原理部分，会摒弃硬件内容，专注软件逻辑与理论

#### 1.4.4 图解丰富、帮助理解

- 课程 PPT 做了很多非常多的工作，丰富的图解帮助内容的理解

### 1.5 环境说明

- Linux 环境：VMWare WorkStation + Linux 虚拟机
- 编程语言：C++, Phython

## 2. 计算机组成原理：概述篇

### 2.1 章节导学

- 计算机的发展简史
- 计算机的分类
- 计算机的体系结构
- 计算机的层次与编程语言
- 计算机的计算单位
- 计算机的字符与编码集

### 2.2 计算机发展简史

#### 2.2.1 计算机发展的四个阶段

1. 1946-1957 年：第一阶段，电子管计算机
2. 1957-1964 年：第二阶段，晶体管计算机
3. 1964-1980 年：第三阶段：集成电路计算机
4. 1980- 现 在：第四阶段：超大规模集成电路计算机

##### 2.2.1.1 第一个阶段：电子管计算机

电子管如图

<img src="https://mianbaoban-assets.oss-cn-shenzhen.aliyuncs.com/2021/3/iiM3Ef.png" alt="image" style="zoom:50%;" />

1. 第二次世界大战是电子管计算机产生的催化剂：英国为了解密德国海军的密文

2. 计算机：埃尼亚克（ENIAC）

   - 出现的其他原因：

     - 战争使用了飞机和火箭
     - 打得准则需要计算射击参数
     - 射击参数需要几千次运算才能计算出来：（没有计算机前，需要人手算）

   - 内部构造
     - 18000 多个电子管
     - 运行耗电量 150 千瓦
     - 重量达 30 吨，占地 1500 平方英尺

3. 这个时期电子计算机的特点

   - 集成度小，占用空间大
   - 功耗高，运行速度相对慢
   - 操作复杂，更换程序时候需要重新接线

##### 2.2.1.2 第二个阶段：晶体管计算机

晶体管如图

<img src="https://pic.baike.soso.com/ugc/baikepic2/11234/cut-20180402112439-1223140248_jpg_2197_1464_388950.jpg/800" alt="image" style="zoom:70%;" />

1.  促使其发生的原因：贝尔实验室的三个科学家发明了晶体管

2.  著名的晶体管计算机：TX-0（诞生于 MIT 林肯实验室）、PDP-1（4k 内存，每秒可执行 200,000 指令，配备 512\*512 的显示器）

3.  这个时期电子计算机的特点

    - 集成度相对较高，空间占用相对较小

    - 功耗相对较低，运行速度较快

    - 操作相对简单，交互更加方便

##### 2.2.1.3 第三个阶段：集成电路计算机

集成电路计算机

<img src="https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190909164654747-1929671686.png" alt="image" style="zoom:50%;" />

1. 促使其发生的原因：德州仪器的工程师发明了集成电路(IC)
2. 这时候计算机的特点
   - 计算机变得更小
   - 功耗变得更低
   - 计算速度变得更快
   - 此时：计算机具备了进入千家万户的条件
3. 这时候产生了操作系统
   - IBM 有两款计算机 7094、1401 卖的非常好，但是它们**主打功能不同**、**相互无法兼容**、**不愿意投入两组人力**，IBM 为了解决这个问题，推出了兼容的产品 System/360：它就是操作系统的雏形

##### 2.2.1.4 第四个阶段：超大规模集成电路计算机

1. 这时候计算机的特点
   - 一个芯片集成了上百万的晶体管
   - 速度更快，体积更小，价格更低，更能被大众接受
   - 用途丰富：文本处理、表格处理、高交互的游戏与应用
2. 不得不提的乔布斯
   - Apple 和 Apple 二代

##### 2.2.1.5 第五个阶段：未来的计算机(畅想篇)

###### 2.2.1.5.1 生物计算机

1. 以蛋白质分子作为主要原材料
2. 这时候计算机的特点
   - 提交小，效率高
   - 不易损坏，生物级别的自动修复
   - 不受信号干扰，无热损耗

###### 2.2.1.5.2 量子计算机

1. 遵循量子力学的物理计算机
2. 目前的研究成果
   - 2013 年 5 月，谷歌和 NASA 发布 D-Wave Two
   - 2017 年 5 月，中国科学院宣布制造出光量子计算机
   - 2019 年 1 月，IBM 展示了世界首款商业化量子计算机
   - 腾讯在 2017 年就组建了量子实验室
   - 阿里巴巴在 2017 年成立了达摩院
   -

#### 2.2.2 微型计算机的发展历史

> 主要从计算机发展历史的第三个阶段以后开始

1. 受限于性能：单核 CPU

<img src="https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190909164748407-2075696834.png" alt="image" style="zoom:50%;" />

2. 关于 CPU 的性能，有一个著名的定律——**摩尔定律：集成电路的性能，每 18~24 个月就会提升一倍**。进入 21 世纪后，随着芯片的发展，芯片里面的电路越来越复杂，越来越密集，并且热损耗也越来越高，我们没有办法解决这样的问题，因此，该定律慢慢失效了。

3. 受限于单核 CPU 的性能瓶颈，于是发展出了多核 CPU。

 <img src="https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190909164808683-1865841507.png" alt="image" style="zoom:50%;" />

#### 2.2.3 参考文档

[计算机发展历史](https://www.cnblogs.com/jvStarBlog/p/11941499.html)

### 2.3 计算机的分类

#### 2.3.1 超级计算机

1. 特点
   - 功能最强、运算速度最快、存储容量最大的计算机
   - 多用于国家高科技领域和尖端技术研究
   - 标记它们的运算速度的单位是 TFlop/s（1TFlop/s=每秒一万亿次浮点计算）
2. 截至 2018 年 11 月，全世界超级计算机排名前三的见下图。

![img](https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190909171618101-1832074648.png)

为什么神威太湖之光的处理器个数远超 Summit，但算力还没有 Summit 高呢？这是因为神威太湖之光采用的全部是拥有自主知识产权的国产芯片。

3. 截至 2018 年 11 月，中国范围内排名前三的超级计算机

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a517b9cfa5294f85a4ad7989a771b612~tplv-k3u1fbpfcp-watermark.image?)

#### 2.3.2 大型计算机

- 又称为大型机、大型主机、主机等
- 具有高性能、可处理大量数据与复杂的运算
- 在大型机市场领域，IBM 占据着很大的份额
- 不得不提，去 IOE 行动：I 指 IBM(服务器提供商)、O 指 Oracle(数据库软件提供商)、E 指 EMC(存储设备提供商)。去 IOE 行动是阿里巴巴在 2008 年提出的概念，因为 IOE 代表了高维护费用的存储系统，并且也不够灵活，伸缩性弱

#### 2.3.3 迷你计算机(服务器)

> 迷你计算机，也称为小型机、普通服务器，具备不错的算力，可以完成较复杂的运算。它不像之前的超级计算机和大型计算机，很多公司（像华为、浪潮、联想等）都可以制造。现代背景下，很多公司已经将传统的大型机替换成了普通服务器，成为大规模企业计算的中枢。云服务厂商（比如阿里云、腾讯云等），也是使用普通服务器来构建自己的云服务和数据中心的。

1. 特点
   - 也被称为小型机，普通服务器
   - 不需要特殊的空调场所
   - 具备不错的算力，可以完成较复杂的运算

#### 2.3.4 工作站

> 工作站是高端的通用微型计算机，提供比个人计算机更强大的性能，类似于普通台式电脑，体积较大，但性能强劲，主要用于图像处理、动画设计、计算机辅助设计及制造 CAD/CAM 等领域。

- 高端的通用型微型计算机，提供比个人计算机更强到的性能
- 类似于普通台式电脑，体积较大，但性能强劲

#### 2.3.5 微型计算机

- 又被称为个人计算机，是最普通的一类计算机，分为：台式机、笔记本电脑、一体机
- 麻雀虽小，五脏俱全：从构成的本质上来讲，个人计算机与前面的分类无异

#### 参考文档

[计算机分类 ](https://www.cnblogs.com/jvStarBlog/p/11941502.html)

### 2.4 计算机的体系与结构

#### 2.4.1 冯诺依曼体系

> 指将程序指令和数据一起存储的计算机设计概念结构

1. 早期计算机仅固定用途程序，如果要完成其他功能需要更改结构，重新设计电路。结果就比较坑爹（不能先打游戏然后再写代码）
2. 后来把程序存储起来并设计通用电路，这样就是**存储程序指令设计通用电路**

所以，冯诺依曼体系有以下特点

- 必须有一个存储器
- 必须有一个控制器
- 必须有一个运算器
- 必须有输入设备
- 必须有输出设备

现代计算机都是冯诺依曼机。

由冯诺依曼体系所指导完成的计算机，必须有以下的几点功能：

- 能够把需要的程序和数据送至计算机中（由输入设备完成）
- 能够长期记忆程序、数据、中间结果及最终运算结果的能力（由存储器完成）
- 能够具备算术、逻辑运算和数据传送等数据加工处理的能力（由运算器、控制器完成）
- 能够按照要求将处理结果输出给用户（由输出设备完成）

冯诺依曼体系结构示意图：

![img](https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190910092431310-1662319731.png)

Tips: 我们可以看到，存储器和 CPU 是分开的，这就导致一个问题(**冯诺依曼瓶颈**)：CPU 和存储器速率之间的问题无法调和。因为 CPU 是高速运算的，处理速率极快，而存储器没有 CPU 快，到 CPU 的数据传输速度慢，这会导致 CPU 经常空转等待数据传输，这样子是非常浪费资源的

![img](https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190910092442177-174994148.png)

既然我们都知道了冯诺依曼体系存在的性能瓶颈，那么，如何解决呢？

#### 2.4.2 现代计算机的结构

现代计算机在冯诺依曼体系结构基础上进行了修改，**解决了 CPU 和存储设备之间的性能差异问题**。下面是现代计算机的结构示意图：

![img](https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190910092451833-1194541326.png)

可以看到，跟前面不一样的是，运算器、控制器和存储器组成了现代计算机的 CPU。

存储器，从广义上，可以理解为存储数据的介质，包括磁带和硬盘。但是，这里的存储器主要是指围绕 CPU 的高速设备，包括寄存器和内存。现代计算机的结构，可以理解为以存储器为核心的结构。

关于存储器，还有很多需要理解的知识，我们会在后续文章里详细介绍。

#### 参考文档

[计算机体系与结构 ](https://www.cnblogs.com/jvStarBlog/p/11941506.html)

### 2.5 计算机的层次与编程语言

#### 2.5.1 程序翻译与程序解释

> 计算机是无法直接理解人类语言的，它只认识 01010101...这样的比特位，因此，我们需要进行程序翻译或程序解析，把人类语言翻译或解析成计算机所能理解的语言。
>
> 那么程序翻译和程序解析这两者之间有什么区别和联系呢？为了理解问题，我们引入两个语言，一个是较为高级的计算机语言——L1，另一个是较为低级的计算机语言——L0，我们接下来会使用这两个语言作为例子来理解什么是程序翻译，什么是程序解析。

##### 2.5.1.1 **程序翻译**

> 假设我们现在使用较为高级的计算机语言 L1 来进行程序的逻辑描述，也就是说我们使用 L1 来编写程序，那么这个由 L1 编写的程序是怎么样执行的呢？当然了，它不是直接执行的，而是在执行的时候生成一个逻辑等价的由低级语言 L0 组成的程序，这个 L0 是计算机实际执行的语言，那么由 L1 生成 L0 这个过程，我们称之为程序翻译，用于生成 L0 的工具叫编译器。

![img](https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190910110418469-625827110.png)

##### 2.5.1.2 **程序解析**

> 同样的，假如我们使用 L1 来进行程序的逻辑描述，那么这个由 L1 编写的程序是怎样执行的呢？为了执行 L1，我们还需要使用 L0 实现另外一个程序，这个程序把 L1 程序作为输入来进行执行，每一句 L1 程序会在 L0 所实现的程序里面进行等价的转换，然后执行，这就是程序的解析，其中，使用 L0 实现的程序叫做解释器。

![img](https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190910110459678-684415321.png)

##### 2.5.1.3 两者的总结

简要的总结程序翻译和程序解析：

1. 对于前面的两个例子而言，计算机执行的指令都是 L0
2. 翻译过程生成新的 L0 程序，解释过程不生成新的 L0 程序
3. 解释过程由 L0 编写的解释器去解释 L1 程序

理解了程序翻译和程序解释，我们来看下常见的编程语言，哪些语言是翻译型语言，哪些是解释型语言，如下图：

![img](https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190910110523773-543959654.png)

对于常见的，我们还有 Java 和 C#，它们又属于哪种语言呢？其实，严格的来说，它们既不属于翻译型语言，也不属于解释型语言，它们是属于**翻译+解释型**语言。

如何理解翻译+解释型语言呢？以 Java 程序的运行过程为例，Java 程序首先会被编译器编译成 JVM 字节码，然后会通过解释器解释成机器码，从而被计算机执行。

![img](https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190910110537130-675156249.png)

#### 2.5.2 计算机的层次与编程语言

1. 按层次来划分计算机系统的话，我们可以划分成七个层次(分层的目的是为了便于理解)

   ![img](https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190910110546659-1074892489.png)

2. 下面逐一介绍每一层。

   - **硬件逻辑层**：主要由门电路、触发器等逻辑电路组成，属于电子工程的领域，这里就不展开介绍了。
   - **微程序机器层**：编程语言主要是微指令集，微指令所组成的微程序直接交由硬件执行，主要是由生产硬件的公司的程序员来编写的。
   - **传统机器层**：编程语言主要是 CPU 指令集（机器指令），和硬件是直接相关的，程序员所用机器指令编写的程序可以交由微程序直接进行解析，而这里提到的指令集，存储在 CPU 内部，对 CPU 的运算进行指导和优化，拥有指令集，CPU 就可以有效地运行。我们知道，CPU 的制造商分为 AMD 和 Intel 两大阵营，那么这两大厂商生产的 CPU 最大的区别是——指令集不同，Intel 的 CPU 所使用的指令集不适合 AMD 的 CPU，同样的，AMD 的 CPU 所使用的指令集也不适合 Intel。除了不同厂商以后，同一个厂商也可以生产不同指令集的 CPU，即不同架构的 CPU 使用不同的 CPU 指令集。

   ![img](https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190910110608700-1159855373.png)

   - **操作系统层**：操作系统，一方面，**向上提供了简易的操作界面，使得用户能够容易地操作计算机**；同时，**向下对接了指令系统，管理硬件资源**。操作系统对用户程序所使用机器的各种资源进行管理和分配，包括 CPU、存储器等等，比如说，当一个用户程序需要运行的时候，首先由操作系统将其加载到内存中，这就需要操作系统首先为其分配内存空间来进行存储。再比如说，某一个程序需要使用某一个输出设备进行结果输出的时候，需要操作系统为其提供该设备的控制权。由此可见，**操作系统是在软件和硬件之间的适配层**。
   - **汇编语言层**：编程语言是**汇编语言**，汇编语言可以**翻译**成可直接执行的机器语言，完成这个翻译过程的程序就是汇编器。从这一层开始，它们所使用的编程语言就是人类比较容易理解的语言了。
   - **高级语言层**：编程语言就是为广大程序员所接受的高级语言，种类非常多，有几百种，常见的编程语言有 Python、Java、C/C++、Golang 等。
   - **应用层**：计算机针对某种用途而设计的应用，像 Word、Excel 等。

#### 参考文档

[计算机层次与编程语言 ](https://www.cnblogs.com/jvStarBlog/p/11941513.html)

### 2.6 计算机的计算单位

#### 2.6.1 容量单位

在日常生活中，我们常说，200M 的光盘、8G 的内存、2T 的硬盘，这里的 M、G、T 就是容量单位，那么它们各自代表着什么含义以及它们之间是如何换算的呢？

在**计算机的物理层面，用高低电平记录信息，高电平代表 1，低电平代表 0，计算机只认识 0 和 1 两种状态**，这里的 0 或 1 我们就称为一个 bit（比特位），但是 0/1 能够表示的内容太少了，需要更大的容量表示方法，因此人们用 8 个比特位来表示一个字节（byte），一个字节等于八个比特位。随着计算机的发展，存储容量越来越大，用字节来表示容量也显得很不方便了，于是，出现了更高的容量单位。

![img](https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190911215426335-1924506467.png)

上图是现在常见常使用的计算机容量单位，可以看到，1Byte=8bit，1KB=1024Byte，1MB=1024KB ... ...

#### 2.6.2 速度单位

这部分内容包括：网络速度和 CPU 频率

##### 2.6.2.1 **网络速度**

装宽带的时候，我们常说 50M 宽带、100M 宽带，这里的 M 不是容量单位，而是网络速度——带宽，单位是 Mbps(兆位/秒)，前面只是省略了 bps。

比如电信拉的是 100M 光纤，测试峰值速度只有 12M 每秒？为什么呢？因为网络常用单位是 Mbps,

100M/s = 100Mbps = 100Mbit/s

100Mbit/s = (100/8)MB/s = 12.5MB/s

##### 2.6.2.2 **CPU 频率**

CPU 的速度一般体现为 CPU 的时钟频率，也称为主频，单位为赫兹（Hz），是评定 CPU 性能的重要指标，主流 CPU 的时钟频率都在 2GHz 以上。

赫兹是国际单位制中频率的单位，是每秒中的周期性变动重复次数的计量，当用来描述计算机的 CPU 时，表达的是高低电平每秒钟变换的次数，主频越高，一个时钟周期里面完成的指令数也越多，2GHz，就是说每秒高低电平变换 20 亿次。

#### 参考文档

[计算机的计量单位 ](https://www.cnblogs.com/jvStarBlog/p/11941519.html)

### 2.7 计算机的字符与编码集

#### 2.7.1 字符编码集的历史

##### 2.7.1.1 **ASCII**

- 使用 7 个 bits 就可以完全表示 ASCII 码
- 包含 95 个可打印字符
- 33 个不可打印字符(包含控制字符)
- 33+95 = 128 = 2^7

对于 ASCII 码，相信大家在平时的学习、工作中都有所了解。

ASCII 码，英文全称为：American Standard Code for Information Interchange，翻译过来就是：美国信息交换标准代码，是我们平常常用的一种编码。那它是怎么来的呢？

在计算机中，所有的数据在存储和运算时都要使用二进制数表示（因为计算机用高电平和低电平分别表示 1 和 0），例如，像 a、b、c、d 这样的 52 个字母（包括大写）以及 0、1 等数字还有一些常用的符号（例如\*、#、@等）在计算机中存储时也要使用二进制数来表示，而具体用哪些二进制数字表示哪个符号，当然每个人都可以约定自己的一套（这就叫编码），假如，对于字符 a，比尔盖茨想用 0001 来表示，而乔布斯想用 0010 来表示，那么他们在沟通交流的时候谁都无法理解对方的语言。因此，为了计算机能够互相通信而不造成混乱，就必须使用相同的编码规则，于是美国有关的标准化组织就出台了 ASCII 编码，统一规定了上述常用符号用哪些二进制数来表示。

标准 ASCII 码也叫基础 ASCII 码，使用**7 个比特位来表示所有的大写和小写字母**，数字 0 到 9、标点符号，以及在美式英语中使用的特殊控制字符，共定义了 128（2 的 7 次方）个**字符**。

下面我们通过一张表来了解部分 ASCII 码。

![img](https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190913123734332-549719122.png)

表中列出了常见字符的 ASCII 码，如：字母 a 表示为 01100001、字符（不是数字哦~）1 表示为 00110001... ...

在计算机的早期，ASCII 码就能满足特定人群的使用了，但是，随着计算机的发展以及计算机的普遍性，ASCII 码逐渐不能满足人们的使用需求，比如一些数学符号以及一些国家的符号都无法表示。于是，人们对 ASCII 码进行了扩充，用 8 个比特位来表示一个字符，这就是拓展的 ASCII 码，拓展的 ASCII 码能表示 256 个字符。

##### 2.7.1.2 **Extended ASCII 码**

![img](https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190913123806096-1094066395.png)

这里面包括了常见的数学运算符、带音标的欧洲字符以及其他常用符号、表格符号等。使用了拓展的 ASCII 码极大的补充了原来的码表，使得计算机能表达的内容越来越丰富。

##### 2.7.1.3 **字符编码集的国际化**

随着计算机的进一步发展，越来越多的国家加入到了使用计算机的行列中，对字符编码集的要求也越来越高。对于欧洲、中亚、东亚、拉丁美洲等国家来说，它们的语言丰富多样，体系不一样，不以有限字符为组合，尤其以中国、韩国、日本等的语言最为复杂，ASCII 码表根本无法表达这些语言，这就迫切需要使用新的编码集，也就是字符编码集的国际化。

#### 2.7.2 中文编码集

##### 2.7.2.1**GB2312**

GB2312 是 1980 年制定的中国汉字编码国家标准，是我国最早最完备的一个编码集，一共收录了 7445 个字符，包括 6763 个汉字和 682 个其他字符，一个汉字占用两个字节。

##### 2.7.2.2 **GBK**

由于 GB2312 不符合国际标准，中国的科学家在 1995 年推出了第二套完备的编码集——GBK，GBK 向下兼容 GB2312，向上支持国际 ISO 标准，收录了 21003 个汉字，支持全部中日韩汉字。

GB2312 和 GBK 都是比较完备的编码集，但是，它们只是一个本地化的编码，在中国使用是没问题的，但要跨国使用就有问题了。举个例子，一个中国人开发了一个网站，一个外国友人访问了这个网站，如果他们本地没有安装 GB2312 编码集或 GBK 编码集的话， 那么他们在访问网站网页的时候看到的会是乱码。因此，就需要一个全球统一的编码规范。

##### 2.7.2.3 **Unicode**

为了统一所有文字的编码，Unicode 应运而生。Unicode 是一个兼容全球的字符集，定义了世界通用的符号集，可以表达全世界所有的文字和字符。Unicode 把所有语言都统一到一套编码里，这样就不会再有乱码问题了。

我们平时用的 UTF-8 是其中一个编码规则，它以字节为单位对 Unicode 进行编码，平常写代码的时候都是推荐使用 UTF-8 编码。中文 Windows 操作系统默认使用 GBK 编码，因此，使用 IDE 编程时通常要设置成 UTF-8 编码。

#### 参考文档

[计算机的字符与编码集 ](https://www.cnblogs.com/jvStarBlog/p/11941521.html)

## 3. 计算机组成原理之组成篇

### 3.1 章节导学

1. 冯诺依曼计算机

   | 冯诺依曼计算机的组成部分 | 计算机硬件                          |
   | ------------------------ | ----------------------------------- |
   | 输入设备                 | 鼠标、键盘                          |
   | 输出设备                 | 显示器                              |
   | 存储器                   | CPU、内存、硬盘                     |
   | 运算器                   | CPU                                 |
   | 控制器                   | CPU、主板、显卡、声卡、电源、网卡等 |

2. 章节组成部分

   | 计算机的总线与 IO 设备 | 计算机的总线                                           | 计算机的输入与输出设备             |
   | ---------------------- | ------------------------------------------------------ | ---------------------------------- |
   | 计算机的存储器         | 计算机的存储器概览、<br />计算机的主存储器与辅助存储器 | 计算机的高速存储器                 |
   | 计算机的 CPU           | 计算机的指令系统、<br />计算机的控制器                 | 计算机的运算器、<br />指令执行过程 |

### 3.2 计算机的总线

#### 3.2.1 总线的概述

##### 3.2.1.1 总线的概述（是什么、什么用）

总线（bus），是用于连接计算机中各种功能部件（如 CPU、内存、输入、输出设备），并在它们之间传送数据的公用线路或通路，主机的各个部件通过总线相连接，外部设备（如 U 盘、移动硬盘）通过相应的接口再与总线相连接，从而形成计算机硬件系统。

USB: Universal Serial Bus, 通用串行总线

PCI 总线、ISA 总线、Thunderbolt 总线。。。

- 提供了对外连接的接口
- 不同设备可以通过 USB 接口进行连接
- 链接的标准，促使外围设备接口的统一

![img](https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190918022558360-281209348.png)

##### 3.2.1.2 总线的分类

1. 片内总线

   > **片内总线**，它是 CPU 内部的信息传输线，连接着控制器、运算器等部件，使用片内总线可以简化 CPU 内部的电路结构。
   >
   > 可以说是高集成度芯片内部的信息传输线

   - 芯片内部的总线
   - 寄存器与寄存器之间
   - 寄存器与控制器、运算器之间

   ![img](https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190918022613781-667181403.png)

2. 系统总线

   > **系统总线**，它是连接 CPU、主存、硬盘、IO 设备、USB 插槽、PCI 插槽等计算机组件的一条信息传输线。

   - 数据总线：一般与 CPU 位数相同(32 位、64 位)
     - 双向传输各个部件的数据信息
     - 数据总线的位数（总线宽度）是数据总线的重要参数
   - 地址总线：指定源数据或目的数据在内存中的地址，地址总线位数=n, 寻址范围：0-2^n
     - 指定源数据或目的数据在内存中的地址
     - 地址总线的位数与存储单元有关
   - 控制总线：
     - 控制总线是用来发出各种控制信号的传输线
     - 控制信号经由控制总线从一个组件发给另外一个组件
     - 控制总线可以监视不同组件之间的状态(就绪/未就绪)

   ![img](https://img2018.cnblogs.com/blog/1666949/201909/1666949-20190918022625463-433149755.png)

#### 3.2.2 总线的仲裁

##### 3.2.2.1 为什么需要总线的仲裁

> 链接：https://www.nowcoder.com/questionTerminal/087e9bf84acf4c5eab01b0924d8b09ce
> 来源：牛客网
>
> 为了解决多个主设备同时竞争总线控制权，必须具有总线仲裁部件，以某种方式选择其中一个主设备作为总线的下一次主方。对多个主设备提出的占用总线请求，一般采用优先级或公平策略进行仲裁。 按照总线仲裁电路的位置不同，仲裁方式分为集中式仲裁和分布式仲裁两类。

比如：当主存需要和硬盘、IO 设备进行数据交互等，当硬盘或者 IO 设备都准备就绪时候，总线应该由硬盘使用还是 IO 设备使用，这时候就需要一个第三方的仲裁器进行裁决

##### 3.2.2.1 总线仲裁的方法

> 总线的仲裁是为了解决总线使用权的冲突问题

###### 3.2.2.1.1 链式查询：

> 链接：https://www.nowcoder.com/questionTerminal/087e9bf84acf4c5eab01b0924d8b09ce
> 来源：牛客网
>
> 链式查询方式的主要特点：总线授权信号 BG 串行地从一个 I/O 接口传送到下一个 I/O 接口。假如 BG 到达的接口无总线请求，则继续往下查询；假如 BG 到达的接口有总线请求， BG 信号便不再往下查询，该 I/O 接口获得了总线控制权。离\*\*\*仲裁器最近的设备具有最高优先级，通过接口的优先级排队电路来实现。
>
> 链式查询方式的优点 : 只用很少几根线就能按一定优先次序实现总线仲裁，很容易扩充设备。
>
> 链式查询方式的缺点 : 对询问链的电路故障很敏感，如果第 i 个设备的接口中有关链的电路有故障，那么第 i 个以后的设备都不能进行工作。查询链的优先级是固定的，如果优先级高的设备出现频繁的请求时，优先级较低的设备可能长期不能使用总线。

###### 3.2.2.1.2 计时器定时查询

- 仲裁控制器对设备编号并使用计数器累计计数
- 接收到仲裁信号后，往所有设备发出计数值
- 计数值与设备编号一致则获得总线使用权

链接：https://www.nowcoder.com/questionTerminal/087e9bf84acf4c5eab01b0924d8b09ce
来源：牛客网

总线上的任一设备要求使用总线时，通过 BR 线发出总线请求。\*\*\*仲裁器接到请求信号以后，在 BS 线为“ 0 ”的情况下让计数器开始计数，计数值通过一组地址线发向各设备。每个设备接口都有一个设备地址判别电路，当地址线上的计数值与请求总线的设备地址相一致时，该设备 置“ 1 ” BS 线，获得了总线使用权，此时中止计数查询。

每次计数可以从“ 0 ”开始，也可以从中止点开始。如果从“ 0 ”开始，各设备的优先次序与链式查询法相同，优先级的顺序是固定的。如果从中止点开始，则每个设备使用总线的优先级相等。

计数器的初值也可用程序来设置，这可以方便地改变优先次序，但这种灵活性是以增加线数为代价的。

##### 3.2.2.1.3 独立请求

- 每个设备均有总线独立链接仲裁器
- 设备可单独向仲裁器发送请求和接收请求
- 当同时收到多个请求信号，仲裁器有权按优先级分配使用权

链接：https://www.nowcoder.com/questionTerminal/087e9bf84acf4c5eab01b0924d8b09ce
来源：牛客网

每一个共享总线的设备均有一对总线请求线 BRi 和总线授权线 BGi 。当设备要求使用总线时，便发出该设备的请求信号。\*\*\*仲裁器中的排队电路决定首先响应哪个设备的请求，给设备以授权信号 BGi 。

独立请求方式的优点：响应时间快，确定优先响应的设备所花费的时间少，用不着一个设备接一个设备地查询。其次，对优先次序的控制相当灵活，可以预先固定也可以通过程序来改变优先次序；还可以用屏蔽 ( 禁止 ) 某个请求的办法，不响应来自无效设备的请求。

#### 参考文档

[计算机的总线](https://www.cnblogs.com/jvStarBlog/p/11941522.html)

### 3.3 计算机的输入输出设备

#### 3.3.1 常见的输入输出设备

1. 常见的输入设备：
   - 字符输入设备
     - 键盘：薄膜键盘、机械键盘(黑轴，红轴，青轴，茶轴)、电容键盘
     - 鼠标
     - 数位板：输入板和压感笔、常用于绘画设计创作
     - 扫描仪：将图形信息转换为数字信号
   - 图像输出设备：
     - 显示器：CRT 显示器、液晶显示器
     - 打印机
     - 投影仪

#### 3.3.2 输入输出接口的通用设计

1. 如果要设计输入输出接口，需要完成什么工作
   - 读取数据、向设备发送数据、设备有没有被占用、设备是否已经链接、设备是否已经启动
2. 主要有：
   - 数据线：
     - 是 I/O 设备与主机之间进行数据交换的传送线
     - 单向传输数据线
     - 双向传输数据线
   - 状态线
     - IO 设备状态向主机报告的信号线
     - 查询设备是否已经正常链接并就绪
     - 查询设备是否已经被占用
   - 命令线
     - CPU 向设备发送命令的信号线
     - 发送读写信号
     - 发送启动禁止信号
   - 设备选择线
     - 主机选择 I/O 设备进行操作的信号线
     - 对连在总线上的设备进行选择

#### 3.3.3 CPU 与 IO 设备的通信

> CPU 速度与 IO 设备速度不一致

1. 程序中断：提供低速设备通知 CPU 的一种异步的方式；CPU 可以高速运转同时兼顾低俗设备的响应
   - 当外围 IO 设备就绪时，向 CPU 发出中断信号
   - CPU 有专门的电路响应中断信号
2. DMA(直接存储器访问)：当主存与 IO 设备交换信息时，不需要中断 CPU，可以提高 CPU 的效率
   - DMA 直接连接主存与 IO 设备
   - DMA 工作时不需要 CPU 的参与
   - 硬盘里、显卡都有这种设备

### 3.4 计算机存储器概览

#### 3.4.1 存储器的分类

1. 按照存储介质来分类
   - 半导体存储器：内存、U 盘、固态硬盘
   - 磁存储器：磁带、磁盘
2. 按照存取方式分类
   - 随机存储器 RAM: 可以随机读取、与位置无关
   - 串行存储器：与位置有关、按顺序查找
   - 只读存储器 ROM：只读不写

#### 3.4.2 存储器的层次结构

1. 读写速度：5200 转、7200 转，越快越好
2. 存储容量：2T、4T，越大越好
3. 价格：越便宜越好

所以用一个单位来衡量这几个结构标准的性价比，叫做位价(每比特位价格)=<容量+价格

可以划分为：

- 缓存：速度快、位价高
- 主存：速度适中、位价适中
- 缓存：速度慢、位价低

**主存-缓存层次**：是在主存之外增加辅助存储器（磁盘、SD 卡、U 盘等），目的是解决主存容量不足的问题。假设我们运行一个超大型游戏，而内存通常只有 8G，此时，就可以把游戏当前使用的数据加载到内存中，把不使用的数据放在辅存中

- 原理：局部性原理
- 实现：在 CPU 与主存之间增加一层速度快(容量小)的 Cache，主存之外增加辅助存储器（磁盘、SD 卡、U 盘等）
- 目的：解决主存速度不足的问题

**局部性原理**：是指 CPU 访问存储器时，无论是**存取指令**还是**存取数据**，所访问的存储单元都**趋于聚集在一个较小的连续区域中**

#### 参考文档

[存储器 ](https://www.cnblogs.com/jvStarBlog/p/11941524.html)

### 3.5 计算机的主存储器与辅助存储器

> 为什么计算机断电时候，内存数据会丢失
>
> 计算机断电时候，磁盘数据不会丢失

#### 3.5.1 主存储器---内存

- RAM：随机存取储器，Random Access Memory.
- RAM: 通过电容存储数据，必须隔一段时间刷新一次
- 如果掉电，那么一段时间后丢失所有数据

#### 3.5.2 辅助存储区----硬盘

1. 特点

- 表面是可磁化的硬磁特性材料
- 移动磁头径向运动读取磁道信息

2. 算法有：

- 先来先服务算法
  - 按顺序访问进程的磁道读写需求
- 最短寻道时间优先
  - 与磁头当前位置有关
  - 优先访问离磁头最近的磁道
- 扫描算法（电梯算法）
  - 每次只往一个方向移动
  - 到达一个方向需要服务的尽头再反方向移动
- 循环扫描算法
  - 读取只能往一个方向移动
  - 到达一个方向的尽头，就又回到起点重新开始
